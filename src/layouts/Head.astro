---
// Inline critical CSS instead of importing to avoid render-blocking
import { readFileSync } from 'fs';
import { join } from 'path';

const fontsCss = readFileSync(
  join(process.cwd(), 'src', 'styles', 'fonts.css'),
  'utf-8'
);
---

<head>
  <!-- boring stuff -->
  <meta charset="UTF-8" />

  <link
    rel="icon"
    type="image/webp"
    href="/favicon.webp"
  />
  <meta
    name="viewport"
    content="width=device-width"
  />

  <!-- Preload MLMRoman font files -->
  <link
    rel="preload"
    href="/fonts/MLMRoman12-Regular.D13Jik12.woff2"
    as="font"
    type="font/woff2"
    crossorigin
  />
  <link
    rel="preload"
    href="/fonts/MLMRoman12-Italic.CZt6EMg7.woff2"
    as="font"
    type="font/woff2"
    crossorigin
  />
  <link
    rel="preload"
    href="/fonts/MLMRoman12-Bold.DH6SWUJU.woff2"
    as="font"
    type="font/woff2"
    crossorigin
  />

  <!-- Inline critical CSS to avoid render-blocking -->
  <style is:inline set:html={fontsCss}></style>

  <link
    rel="preconnect"
    href="https://fonts.googleapis.com"
  />
  <link
    rel="preconnect"
    href="https://fonts.gstatic.com"
    crossorigin
  />

  <!-- https://pagespeedchecklist.com/asynchronous-google-fonts->
  <!-- connect to domain of font files -->
  <link
    rel="preconnect"
    href="https://fonts.gstatic.com"
    crossorigin
  />

  <!-- optionally increase loading priority -->
  <link
    rel="preload"
    as="style"
    href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;800&display=swap"
  />

  <!-- async CSS -->
  <link
    rel="stylesheet"
    media="print"
    onload="this.onload=null;this.removeAttribute('media');"
    href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;800&display=swap"
  />

  <!-- no-JS fallback -->
  <noscript>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;800&display=swap"
      rel="stylesheet"
    />
  </noscript>

  <!-- Page specific SEO -->
  <slot />
</head>
